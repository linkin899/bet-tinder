<!DOCTYPE html>
<html>
<head>
    <title>–ù–∞–π–¥–∏ —Å–≤–æ—é —Å—Ç–∞–≤–∫—É ‚öΩ</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; margin: 0; background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; }
        .card { width: 320px; height: 450px; background: white; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); position: relative; overflow: hidden; user-select: none; color: #333; }
        .match-info { padding: 20px; text-align: center; }
        .teams { display: flex; justify-content: space-between; align-items: center; margin: 30px 0; }
        .team { text-align: center; width: 40%; }
        .team img { width: 60px; height: 60px; object-fit: contain; }
        .vs { font-weight: bold; font-size: 20px; }
        .odds { display: flex; justify-content: space-around; margin: 20px 0; opacity: 0; transition: opacity 0.3s; }
        .odd { padding: 10px 15px; background: #f5f5f5; border-radius: 8px; cursor: pointer; }
        .odd:hover { background: #e0e0e0; }
        .time { color: #666; font-size: 14px; }
        .swipe-hint { margin-top: 20px; color: rgba(255,255,255,0.7); font-size: 14px; }
        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer; /* –î–æ–±–∞–≤–∏–ª–∏ –∫—É—Ä—Å–æ—Ä-—É–∫–∞–∑–∞—Ç–µ–ª—å */
        }
        .like { background: #4CAF50; color: white; }
        .dislike { background: #f44336; color: white; }
    </style>
</head>
<body>
    <div class="card" id="card">
        <div class="match-info">
            <div class="time">–°–µ–≥–æ–¥–Ω—è, 20:00</div>
            <div class="teams">
                <div class="team">
                    <img src="https://via.placeholder.com/60x60?text=Team+A" alt="Team A">
                    <h3>–ë–∞–≤–∞—Ä–∏—è</h3>
                </div>
                <div class="vs">VS</div>
                <div class="team">
                    <img src="https://via.placeholder.com/60x60?text=Team+B" alt="Team B">
                    <h3>–î–æ—Ä—Ç–º—É–Ω–¥</h3>
                </div>
            </div>
            <div class="odds" id="odds">
                <div class="odd" onclick="placeBet('1')">–ü1 (2.10)</div>
                <div class="odd" onclick="placeBet('X')">X (3.40)</div>
                <div class="odd" onclick="placeBet('2')">–ü2 (2.80)</div>
            </div>
        </div>
    </div>
    
    <!-- –î–æ–±–∞–≤–∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ -->
    <div class="buttons">
        <button class="dislike" id="dislike">üëé</button>
        <button class="like" id="like">üëç</button>
    </div>

    <script>
        // –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ –Ω–∞—á–∞–ª–æ —Å–∫—Ä–∏–ø—Ç–∞
let matches = [];
let currentMatchIndex = 0;

// –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
async function loadMatches() {
  try {
    const response = await fetch('https://script.google.com/macros/s/AKfycbyHyMTLPKPH-so3n_78PNIXdHJNgWTkhfwt8GXvm6jOE1PApcY-OYzIpD9uPTgKij58/exec' + Date.now()
);
    matches = await response.json();
    renderMatchCard(matches[currentMatchIndex]);
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
    alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–∞—Ç—á–∏');
  }
}
function renderMatchCard(match) {
  const card = document.getElementById('card');
  card.innerHTML = `
    <div class="match-info">
      <div class="time">${formatDate(match['–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è'])}</div>
      <div class="teams">
        <div class="team">
          <img src="${match['–õ–æ–≥–æ 1']}" alt="${match['–ö–æ–º–∞–Ω–¥–∞ 1']}">
          <h3>${match['–ö–æ–º–∞–Ω–¥–∞ 1']}</h3>
        </div>
        <div class="vs">VS</div>
        <div class="team">
          <img src="${match['–õ–æ–≥–æ 2']}" alt="${match['–ö–æ–º–∞–Ω–¥–∞ 2']}">
          <h3>${match['–ö–æ–º–∞–Ω–¥–∞ 2']}</h3>
        </div>
      </div>
      <div class="odds" id="odds">
        <div class="odd" onclick="placeBet('1')">–ü1 (${match['–ü1']})</div>
        <div class="odd" onclick="placeBet('X')">X (${match['X']})</div>
        <div class="odd" onclick="placeBet('2')">–ü2 (${match['–ü2']})</div>
      </div>
    </div>
  `;
}

// –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã
function formatDate(dateString) {
  const options = { 
    weekday: 'long', 
    day: 'numeric', 
    month: 'long', 
    hour: '2-digit', 
    minute: '2-digit' 
  };
  return new Date(dateString).toLocaleDateString('ru-RU', options);
}
// –û–±–Ω–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é nextMatch
function nextMatch() {
  currentMatchIndex++;
  if(currentMatchIndex >= matches.length) {
    currentMatchIndex = 0; // –ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –ø–æ—Ä—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
  }
  renderMatchCard(matches[currentMatchIndex]);
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', () => {
  loadMatches(); // –í–º–µ—Å—Ç–æ renderMatchCard(matches[0])
});

function getBetLabel(type) {
  return {
    '1': '–ü1',
    'X': 'X',
    '2': '–ü2'
  }[type];
}

// –®–∞–≥ 4: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
document.addEventListener('DOMContentLoaded', () => {
  renderMatchCard(matches[currentMatchIndex]);
});

// –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–≤–∞–π–ø–∞ –∏ –∫–Ω–æ–ø–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        const likeBtn = document.getElementById('like');
        const dislikeBtn = document.getElementById('dislike');
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤
        likeBtn.addEventListener('click', () => handleSwipeAction('right'));
        dislikeBtn.addEventListener('click', () => handleSwipeAction('left'));

        // –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
        function handleSwipeAction(direction) {
            if (direction === 'right') {
                card.style.transform = 'translate(500px, 0) rotate(30deg)';
                setTimeout(() => {
                    odds.style.opacity = '1';
                    console.log("–õ–∞–π–∫! –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞–≤–∫–∏");
                }, 300);
            } else {
                card.style.transform = 'translate(-500px, 0) rotate(-30deg)';
                setTimeout(() => {
                    nextMatch();
                    console.log("–î–∏–∑–ª–∞–π–∫! –°–ª–µ–¥—É—é—â–∏–π –º–∞—Ç—á");
                }, 300);
            }
        }

        const card = document.getElementById('card');
        const odds = document.getElementById('odds');
        let startX, moveX;

        // –°–≤–∞–π–ø –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
        card.addEventListener('touchstart', (e) => { startX = e.touches[0].clientX; }, { passive: true });
        card.addEventListener('touchmove', (e) => { moveX = e.touches[0].clientX - startX; card.style.transform = `translateX(${moveX}px) rotate(${moveX/20}deg)`; }, { passive: true });
        card.addEventListener('touchend', () => { handleSwipe(); card.style.transform = 'none'; });

        // –°–≤–∞–π–ø –Ω–∞ –ü–ö (–º—ã—à—å)
        card.addEventListener('mousedown', (e) => { startX = e.clientX; document.addEventListener('mousemove', onMouseMove); document.addEventListener('mouseup', onMouseUp); });
        function onMouseMove(e) { moveX = e.clientX - startX; card.style.transform = `translateX(${moveX}px) rotate(${moveX/20}deg)`; }
        function onMouseUp() { handleSwipe(); card.style.transform = 'none'; document.removeEventListener('mousemove', onMouseMove); document.removeEventListener('mouseup', onMouseUp); }

        function handleSwipe() {
            if (Math.abs(moveX) > 100) {
                if (moveX > 0) { odds.style.opacity = '1'; } // –õ–∞–π–∫ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞–≤–∫–∏
                else { nextMatch(); } // –î–∏–∑–ª–∞–π–∫ ‚Üí —Å–ª–µ–¥—É—é—â–∏–π –º–∞—Ç—á
            }
        }

        function placeBet(betType) {
            alert(`–°—Ç–∞–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞: ${betType}\n–ö–æ—ç—Ñ: ${getOdds(betType)}`);
            if (window.Telegram && window.Telegram.WebApp) {
                Telegram.WebApp.sendData(JSON.stringify({ bet: betType }));
            }
            nextMatch();
        }

        function getOdds(betType) { return { '1': 2.10, 'X': 3.40, '2': 2.80 }[betType]; }
        
        // –ü–µ—Ä–µ–Ω–µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é nextMatch —Å—é–¥–∞ –¥–ª—è –ø–æ—Ä—è–¥–∫–∞
        function nextMatch() {
            odds.style.opacity = '0';
            card.style.transform = 'none';
            console.log("–ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤—ã–π –º–∞—Ç—á...");
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
        }
    </script>
</body>
</html>